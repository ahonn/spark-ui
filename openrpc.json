{
  "openrpc": "1.2.1",
  "info": {
    "version": "1.0.0",
    "title": "Spark Mock"
  },
  "methods": [
    {
      "name": "getStakeRate",
      "params": [
        {
          "name": "address",
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "rate",
        "schema": {
          "type": "object",
          "required": [
            "amount",
            "rate"
          ],
          "properties": {
            "address": {
              "$ref": "#/components/schemas/Address"
            },
            "rate": {
              "type": "integer",
              "minimum": 0,
              "maximum": 100
            }
          }
        }
      }
    },
    {
      "name": "getStakeState",
      "params": [
        {
          "name": "address",
          "schema": {
            "type": "string"
          }
        }
      ],
      "result": {
        "name": "state",
        "schema": {
          "type": "object",
          "required": [
            "amount",
            "stake_amount",
            "delegate_amount"
          ],
          "properties": {
            "amount": {
              "type": "integer",
              "minimum": 100000000000,
              "maximum": 100000000000000
            },
            "stake_amount": {
              "type": "integer",
              "minimum": 10000000,
              "maximum": 10000000000
            },
            "delegate_amount": {
              "type": "integer",
              "minimum": 10000000,
              "maximum": 10000000000
            },
            "withdrawable_amount": {
              "type": "integer",
              "minimum": 10000000,
              "maximum": 10000000000
            }
          }
        }
      }
    },
    {
      "name": "getStakeHistory",
      "params": [
        {
          "name": "address",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "page_number",
          "schema": {
            "type": "integer"
          }
        },
        {
          "name": "page_size",
          "schema": {
            "type": "integer"
          }
        }
      ],
      "result": {
        "name": "model",
        "schema": {
          "type": "array",
          "items": {
            "type": "object",
            "required": [
              "id",
              "address",
              "timestamp",
              "event",
              "operation",
              "tx_hash",
              "amount",
              "epoch",
              "status"
            ],
            "properties": {
              "id": {
                "type": "integer",
                "minimum": 0
              },
              "address": {
                "type": "string",
                "pattern": "^(ckt)[\\d\\w]{97}$"
              },
              "timestamp": {
                "type": "string",
                "format": "date-time"
              },
              "event": {
                "type": "string",
                "enum": [
                  "add",
                  "reedem",
                  "withdraw"
                ]
              },
              "operation": {
                "type": "string",
                "enum": [
                  "stake",
                  "delegate"
                ]
              },
              "tx_hash": {
                "type": "string",
                "pattern": "^(0x)[\\d\\w]{64}$"
              },
              "amount": {
                "type": "integer",
                "minimum": 100000000000,
                "maximum": 100000000000000
              },
              "epoch": {
                "type": "integer",
                "minimum": 0
              },
              "status": {
                "type": "string",
                "enum": [
                  "pending",
                  "success",
                  "failed"
                ]
              }
            }
          },
          "minItems": 10,
          "maxItems": 10
        }
      }
    },
    {
      "name": "stake",
      "params": [
        {
          "name": "address",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "amount",
          "schema": {
            "type": "number"
          }
        }
      ],
      "result": {
        "name": "transaction",
        "schema": {
          "$ref": "#/components/schemas/Transaction"
        }
      }
    },
    {
      "name": "unstake",
      "params": [
        {
          "name": "address",
          "schema": {
            "type": "string"
          }
        },
        {
          "name": "amount",
          "schema": {
            "type": "number"
          }
        }
      ],
      "result": {
        "name": "transaction",
        "schema": {
          "$ref": "#/components/schemas/Transaction"
        }
      }
    }
  ],
  "components": {
    "schemas": {
      "Address": {
        "type": "string",
        "pattern": "ckt1[qpzry9x8gf2tvdw0s3jn54khce6mua7l]{42}"
      },
      "Hash": {
        "type": "string",
        "pattern": "^(0x)[\\d\\w]{64}$"
      },
      "Hex": {
        "type": "string",
        "pattern": "^([a-fA-F0-9]{2})+$"
      },
      "Script": {
        "type": "object",
        "required": [
          "codeHash",
          "hashType",
          "args"
        ],
        "properties": {
          "codeHash": {
            "$ref": "#/components/schemas/Hash"
          },
          "hashType": {
            "type": "string",
            "enum": [
              "type",
              "data"
            ]
          },
          "args": {
            "$ref": "#/components/schemas/Hex"
          }
        }
      },
      "Transaction": {
        "title": "transaction",
        "type": "object",
        "required": [
          "inputs",
          "outputs"
        ],
        "properties": {
          "inputs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Input"
            }
          },
          "outputs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Output"
            }
          }
        }
      },
      "Input": {
        "title": "input",
        "type": "object",
        "required": [
          "previousOutput",
          "since"
        ],
        "properties": {
          "previousOutput": {
            "type": "object",
            "required": [
              "txHash",
              "index"
            ],
            "properties": {
              "txHash": {
                "$ref": "#/components/schemas/Hash"
              },
              "index": {
                "type": "integer",
                "minimum": 0,
                "maximum": 9
              }
            }
          },
          "since": {
            "type": "string",
            "pattern": "[\\d]+"
          }
        }
      },
      "Output": {
        "title": "output",
        "type": "object",
        "required": [
          "capacity",
          "lock",
          "type"
        ],
        "properties": {
          "capacity": {
            "$ref": "#/components/schemas/Hex"
          },
          "lock": {
            "$ref": "#/components/schemas/Script"
          },
          "type": {
            "$ref": "#/components/schemas/Script"
          }
        }
      }
    }
  }
}
